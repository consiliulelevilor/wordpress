$(document).ready(function(){$("#regionslinks li a, #regionslinks2 li a").mouseover(function(){var e=$(this).metadata().id;var d=$("#map_cords area").each(function(){var f=new String($(this).metadata().id).split("_");for(x in f){if(f[x]==e){setAreaOver($(this).get(0),"gmipam_0_canvas",mapSettings.b,mapSettings.c,mapSettings.o,mapSettings.n,mapSettings.f,mapSettings.z,0)}}})});var b=$("#footer-container > .wrapper").height();var a=$("#partnerslist");var c=$("#partnerstoogle");$(a).hide();$("#footer-container > .wrapper").css("min-height",b);$(c).click(function(){$(a).slideToggle("slow",function(){$(c).find(".icon").toggleClass("up")});return false});$("#mainCities li a").mouseover(function(){var d=$(this).metadata().id;$("#citiesLinks a.town"+d).addClass("active")}).mouseout(function(){var d=$(this).metadata().id;$("#citiesLinks a.town"+d).removeClass("active")});$("#citiesLinks a").mouseover(function(){var d=$(this).metadata().id;$("#level_link_"+d).addClass("hover")}).mouseout(function(){var d=$(this).metadata().id;$("#level_link_"+d).removeClass("hover")});$("#regionslinks li a, #regionslinks2 li a").mouseout(function(){var e=$(this).metadata().id;var d=$("#map_cords area").each(function(){var f=new String($(this).metadata().id).split("_");for(x in f){if(f[x]==e){setAreaOut($(this).get(0),"gmipam_0_canvas",0,0)}}})});$("#moreLevels").click(function(){$(".opacity-text").addClass("overlay");$(".opacity-layer").hide();$(".layer-regions .inner .inner-2nd").css("overflow","visible");$("#regionslinksnext").slideDown(500);$(this).hide();$("#regionslinks").hide();return false});$("#lessLevels").click(function(){$(".opacity-text").removeClass("overlay");$(".opacity-layer").show();$(".layer-regions .inner .inner-2nd").css("overflow","hidden");$("#regionslinksnext").hide();$("#regionslinks, #moreLevels").show();return false});if(typeof(window.facebook_message)!="undefined"){$("ul.entry li blockquote p.entry-text").html(facebook_message)}});$(document).ready(function(){var h=$("#observed-counter-span");var g=c();if(e()){h.html("<b>("+e()+")</b>");h.closest("li").removeClass("inactive");$("#observed-link").show();$("#observed-link").parent().show();var b=d();$("a.obs").each(function(){if(jQuery.inArray($(this).metadata().id,b)>=0){f($(this))}})}else{$("#observed-link").hide();$("#observed-link").parent().hide()}$("a.obs").live("click",function(){if(i($(this).metadata().id)){f($(this));ShowMessage.success(_translate_Offer_successfully_added_to_observed)}else{ShowMessage.error(_translate_Offer_error_add_to_observed)}return false});function f(j){j.removeClass("obs").addClass("obs-del");h.html("<b>("+e()+")</b>");h.closest("li").removeClass("inactive").next("li").removeClass("noslash");$("#observed-link").show();$("#observed-link").parent().show();j.find("span.icon").addClass("selected");$("#observed-link").closest("ul").show()}$("a.obs-del").live("click",function(){a($(this).metadata().id);$(this).removeClass("obs-del").addClass("obs");var j=e();j?h.html("<b>("+j+")</b>"):h.text("("+j+")");$(this).find("span.icon").removeClass("selected");if(!j){if(!$("#userLogged").length){h.closest("li").addClass("inactive").next("li").addClass("noslash")}$("#observed-link").hide();$("#observed-link").parent().hide();if($("#observed-link").closest("ul").find("li:visible").size()==0){$("#observed-link").closest("ul").hide()}}return false});$(".remove-from-observed").click(function(){$("input[name=offer_id[]]:checked").each(function(){var j=$(this).attr("value");a(j);$("#offer-"+j).remove();var k=e();k?h.html("<b>("+k+")</b>"):h.text("("+k+")");if(!k){h.closest("li").addClass("inactive");$("#observed-link").hide();$("#observed-link").parent().hide();if($("#observed-link").closest("ul").find("li:visible").size()==0){$("#observed-link").closest("ul").hide()}}})});$("#select-all").click(function(){var j=$(this).is(":checked");$("#offers_table input[type=checkbox]").each(function(){if(j){$(this).attr("checked","checked")}else{$(this).removeAttr("checked")}})});function c(){var j=$.cookie("observed");if(j==null){$.cookie("observed","",getCookieOptions());j=""}return j}function i(k){var j=d();if(jQuery.inArray(k,j)==-1){j=$.merge(j,new Array(k));$.cookie("observed",j.join(","),getCookieOptions());return true}return false}function a(n){var m=$.cookie("observed");var l=m?m.split(","):new Array();var j=new Array();var k=0;for(x in l){if(l[x]!=n&&l[x]){j[k++]=l[x]}}$.cookie("observed",j.join(","),getCookieOptions())}function d(){var j=c();return j?j.split(","):new Array()}function e(){return d().length}});